// Deploy the mock USDT contract on shasta testnet!!
//@ts-ignore
import TronWeb from "tronweb";
import fs from "fs";


async function main() {
    const tronWeb = new TronWeb({
        fullHost: process.env.SHASTA_TESTNET_API,
        headers: { "TRON-PRO-API-KEY": process.env.TRON_GRID_API_KEY },
        privateKey: process.env.PRIVATE_KEY_SHASTA
    })

    const USDTMVerifierJSONBUFF = fs.readFileSync("artifacts/contracts/Mock/MockERC20.sol/MOCKERC20.json")

    const USDTMArtifact = JSON.parse(USDTMVerifierJSONBUFF.toString());

    const options = {
        feeLimit: 1000000000,
        callValue: 0,
        tokenId: "",
        tokenValue: 0,
        userFeePercentage: 10,
        originEnergyLimit: 10,
        abi: JSON.stringify(USDTMArtifact.abi),
        bytecode: USDTMArtifact.bytecode,
        name: USDTMArtifact.contractName,
        permissionId: 0
    }

    const tx = await tronWeb.transactionBuilder.createSmartContract(options, process.env.ISSUER_ADDRESS).catch((err: any) => {
        console.error(err);
    });

    const signedTx = await tronWeb.trx.sign(tx, process.env.PRIVATE_KEY_SHASTA);


    const receipt = await tronWeb.trx.sendRawTransaction(signedTx);

    console.log(receipt);

    //     {
    //   result: true,
    //   txid: '7f9a1dc2a68237755421a37f60371c53873c59d70711e763a5bbcdf154fc71f3',
    //   transaction: {
    //     visible: false,
    //     txID: '7f9a1dc2a68237755421a37f60371c53873c59d70711e763a5bbcdf154fc71f3',
    //     contract_address: '413386a58b52c09e057e7d1ad163472f1db9c6e63a',
    //     raw_data: {
    //       contract: [Array],
    //       ref_block_bytes: '443c',
    //       ref_block_hash: '4a007126a2c6046b',
    //       expiration: 1666289430000,
    //       fee_limit: 1000000000,
    //       timestamp: 1666289370759
    //     },
    //     raw_data_hex: '0a02443c22084a007126a2c6046b40f0dbdbb4bf305aad33081e12a8330a30747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e437265617465536d617274436f6e747261637412f3320a1541dd9f4af3c838d2596da5c17841fa2df13637dfdc12d9320a1541dd9f4af3c838d2596da5c17841fa2df13637dfdc1afc050a481a08417070726f76616c2212080112056f776e65721a07616464726573732214080112077370656e6465721a07616464726573732210120576616c75651a0775696e7432353630030a421a085472616e7366657222110801120466726f6d1a0761646472657373220f08011202746f1a07616464726573732210120576616c75651a0775696e7432353630030a401a09616c6c6f77616e6365221012056f776e65721a0761646472657373221212077370656e6465721a07616464726573732a091a0775696e74323536300240020a3c1a07617070726f7665221212077370656e6465721a076164647265737322111206616d6f756e741a0775696e743235362a061a04626f6f6c300240030a2e1a0962616c616e63654f66221212076163636f756e741a07616464726573732a091a0775696e74323536300240020a171a08646563696d616c732a071a0575696e7438300240020a4f1a116465637265617365416c6c6f77616e6365221212077370656e6465721a0761646472657373221a120f7375627472616374656456616c75651a0775696e743235362a061a04626f6f6c300240030a4a1a11696e637265617365416c6c6f77616e6365221212077370656e6465721a07616464726573732215120a616464656456616c75651a0775696e743235362a061a04626f6f6c300240030a311a046d696e74221212076163636f756e741a076164647265737322111206616d6f756e741a0775696e74323536300240030a141a046e616d652a081a06737472696e67300240020a161a0673796d626f6c2a081a06737472696e67300240020a1c1a0b746f74616c537570706c792a091a0775696e74323536300240020a381a087472616e73666572220d1202746f1a076164647265737322111206616d6f756e741a0775696e743235362a061a04626f6f6c300240030a4d1a0c7472616e7366657246726f6d220f120466726f6d1a0761646472657373220d1202746f1a076164647265737322111206616d6f756e741a0775696e743235362a061a04626f6f6c3002400322b12c60806040523480156200001157600080fd5b506040518060400160405280600881526020017f555344544d4f434b0000000000000000000000000000000000000000000000008152506040518060400160405280600581526020017f555344544d000000000000000000000000000000000000000000000000000000815250816003908051906020019062000096929190620000b8565b508060049080519060200190620000af929190620000b8565b505050620001cd565b828054620000c69062000168565b90600052602060002090601f016020900481019282620000ea576000855562000136565b82601f106200010557805160ff191683800117855562000136565b8280016001018555821562000136579182015b828111156200013557825182559160200191906001019062000118565b5b50905062000145919062000149565b5090565b5b80821115620001645760008160009055506001016200014a565b5090565b600060028204905060018216806200018157607f821691505b602082108114156200019857620001976200019e565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b61145480620001dd6000396000f3fe608060405234801561001057600080fd5b50600436106100b45760003560e01c806340c10f191161007157806340c10f19146101a357806370a08231146101bf57806395d89b41146101ef578063a457c2d71461020d578063a9059cbb1461023d578063dd62ed3e1461026d576100b4565b806306fdde03146100b9578063095ea7b3146100d757806318160ddd1461010757806323b872dd14610125578063313ce567146101555780633950935114610173575b600080fd5b6100c161029d565b6040516100ce9190610ed1565b60405180910390f35b6100f160048036038101906100ec9190610cfc565b61032f565b6040516100fe9190610eb6565b60405180910390f35b61010f610352565b60405161011c9190610ff3565b60405180910390f35b61013f600480360381019061013a9190610cad565b61035c565b60405161014c9190610eb6565b60405180910390f35b61015d61038b565b60405161016a919061100e565b60405180910390f35b61018d60048036038101906101889190610cfc565b610394565b60405161019a9190610eb6565b60405180910390f35b6101bd60048036038101906101b89190610cfc565b6103cb565b005b6101d960048036038101906101d49190610c48565b6103d9565b6040516101e69190610ff3565b60405180910390f35b6101f7610421565b6040516102049190610ed1565b60405180910390f35b61022760048036038101906102229190610cfc565b6104b3565b6040516102349190610eb6565b60405180910390f35b61025760048036038101906102529190610cfc565b61052a565b6040516102649190610eb6565b60405180910390f35b61028760048036038101906102829190610c71565b61054d565b6040516102949190610ff3565b60405180910390f35b6060600380546102ac90611123565b80601f01602080910402602001604051908101604052809291908181526020018280546102d890611123565b80156103255780601f106102fa57610100808354040283529160200191610325565b820191906000526020600020905b81548152906001019060200180831161030857829003601f168201915b5050505050905090565b60008061033a6105d4565b90506103478185856105dc565b600191505092915050565b6000600254905090565b6000806103676105d4565b90506103748582856107a7565b61037f858585610833565b60019150509392505050565b60006012905090565b60008061039f6105d4565b90506103c08185856103b1858961054d565b6103bb9190611045565b6105dc565b600191505092915050565b6103d58282610ab4565b5050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b60606004805461043090611123565b80601f016020809104026020016040519081016040528092919081815260200182805461045c90611123565b80156104a95780601f1061047e576101008083540402835291602001916104a9565b820191906000526020600020905b81548152906001019060200180831161048c57829003601f168201915b5050505050905090565b6000806104be6105d4565b905060006104cc828661054d565b905083811015610511576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161050890610fb3565b60405180910390fd5b61051e82868684036105dc565b60019250505092915050565b6000806105356105d4565b9050610542818585610833565b600191505092915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b600033905090565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16141561064c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161064390610f93565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1614156106bc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106b390610f13565b60405180910390fd5b80600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9258360405161079a9190610ff3565b60405180910390a3505050565b60006107b3848461054d565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff811461082d578181101561081f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161081690610f33565b60405180910390fd5b61082c84848484036105dc565b5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1614156108a3576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161089a90610f73565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415610913576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161090a90610ef3565b60405180910390fd5b61091e838383610c14565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050818110156109a4576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161099b90610f53565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254610a379190611045565b925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef84604051610a9b9190610ff3565b60405180910390a3610aae848484610c19565b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415610b24576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b1b90610fd3565b60405180910390fd5b610b3060008383610c14565b8060026000828254610b429190611045565b92505081905550806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254610b979190611045565b925050819055508173ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610bfc9190610ff3565b60405180910390a3610c1060008383610c19565b5050565b505050565b505050565b600081359050610c2d816113f0565b92915050565b600081359050610c4281611407565b92915050565b600060208284031215610c5a57600080fd5b6000610c6884828501610c1e565b91505092915050565b60008060408385031215610c8457600080fd5b6000610c9285828601610c1e565b9250506020610ca385828601610c1e565b9150509250929050565b600080600060608486031215610cc257600080fd5b6000610cd086828701610c1e565b9350506020610ce186828701610c1e565b9250506040610cf286828701610c33565b9150509250925092565b60008060408385031215610d0f57600080fd5b6000610d1d85828601610c1e565b9250506020610d2e85828601610c33565b9150509250929050565b610d41816110ad565b82525050565b6000610d5282611029565b610d5c8185611034565b9350610d6c8185602086016110f0565b610d75816111b3565b840191505092915050565b6000610d8d602383611034565b9150610d98826111c4565b604082019050919050565b6000610db0602283611034565b9150610dbb82611213565b604082019050919050565b6000610dd3601d83611034565b9150610dde82611262565b602082019050919050565b6000610df6602683611034565b9150610e018261128b565b604082019050919050565b6000610e19602583611034565b9150610e24826112da565b60'... 3222 more characters,
    //     signature: [
    //       '0b0670839f7e31bf2c02528d4f03607692c6b7262b9eac756fb55ab7d3b3cf93625ae2ac267397631e563ff1c4e63e6031c23c43684cd3361ee2b2b455ab7cda01'
    //     ]
    //   }
    // }
}

// main().catch((err) => {
//     console.error(err);
//     process.exitCode = 1;
// })